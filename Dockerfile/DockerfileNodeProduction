FROM node:10.11.0-alpine

MAINTAINER JUNYUAN ZHGENG

ENV NPM_CONFIG_LOGLEVEL warn

# Provides cached layer for node_modules
RUN mkdir -p /app

# Define working directory
WORKDIR /app

ADD ./res.json /app/res.json
ADD ./pages /app/pages
ADD ./containers /app/containers
ADD ./components /app/components
ADD ./static /app/static
ADD ./.babelrc /app/.babelrc
ADD ./next.config.js /app/next.config.js
ADD ./package.json /app/package.json
ADD ./yarn.lock /app/yarn.lock

RUN yarn install
RUN yarn run build

EXPOSE 3000
